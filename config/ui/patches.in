menu "Removal patches"

config FREETZ_SELECT_HARDENING
	bool "Select hardening"
	depends on FREETZ_SHOW_ADVANCED
	depends on \
		FREETZ_AVM_HAS_TR069 || \
		FREETZ_AVM_HAS_MYFRITZ || \
		FREETZ_AVM_HAS_SIGNATURE
	default n
	select FREETZ_REMOVE_TR069 if FREETZ_AVM_HAS_TR069
	select FREETZ_REMOVE_MYFRITZ if FREETZ_AVM_HAS_MYFRITZ
	select FREETZ_REMOVE_PUBKEY if FREETZ_AVM_HAS_SIGNATURE
	select FREETZ_REMOVE_PUBKEY_INHAUS if FREETZ_AVM_HAS_SIGNATURE && FREETZ_TYPE_FIRMWARE_INHAUS
	help
		This selects some patches to remove unsecure files/services:
		 - TR069: Your provider is able to create user accounts
		   and could then login to your device remotely.
		 - MYFRITZ: AVM has wildcard certificates for *.myfritz.net
		   and can attack your HTTPS sessions as man-in-the-middle.
		 - PUBKEY: Removing the public key of AVM prevents unwanted
		   firmware updates which could occur spontaneousily.

comment "Removal patches ------------------------------------------"

config FREETZ_REMOVE_LEFTOVER
	bool "Remove leftover"
	default y
	help
		This enables the scripts in patches/cond/300-remove-leftover/
		which remove some unused leftovers of avm, currently
		 111-disable_crashreport.sh
		 170-remove_dect_related_files_on_nondect_box.sh
		 510-remove_usbmon.sh
		 565-remove_more.sh
		 565-remove_ncurses.sh
		 570-remove-trustedd.sh
		 800-remove_oemcheck.sh
		 800-remove_ptest.sh

config FREETZ_REMOVE_MODULE_BINS
	bool "Remove module bins"
	depends on FREETZ_AVM_VERSION_07_1X_MAX
	default y
	help
		Removes these (unused) kernel files:
		 modules.alias.bin
		 modules.builtin.bin
		 modules.dep.bin
		 modules.symbols.bin

config FREETZ_REMOVE_MICROVOIP_DSL
	bool "Remove microvoip-dsl.bin"
	depends on \
		FREETZ_AVM_HAS_MICROVOIP_DSL && \
		FREETZ_REMOVE_TELEPHONY
	default n
	help
		Remove the files lib/modules/microvoip-dsl.bin and
		lib/modules/2.6.13.1-*/kernel/drivers/atm/avm_atm/tiatm.ko
		This saves about 590-700 KB of uncompressed data size.

config FREETZ_REMOVE_ANNEX_B_FIRMWARE
	bool "Remove Annex B firmware"
	depends on \
		FREETZ_SHOW_ADVANCED && \
		FREETZ_TYPE_7270_V1
	default n
	help
		Remove lib/modules/dsp_*/*-B-dsl.bin. This saves about
		330-400 KB of uncompressed data size.

config FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_DIFFS
	bool "Remove 2nd Annex firmware"
	depends on FREETZ_AVM_HAS_MULTI_ANNEX
	default n
	help
		Remove the diffs to the prime firmware. This saves about
		120-230 KB of uncompressed data size and 67 KB of bspatch.
		Select this only if you don't want to switch the firmware.
		See https://web.archive.org/20200701000000/www.wehavemorefun.de/fritzbox/Multi-DSL-Firmware


config FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_PRIME
	bool "Remove 1st Annex firmware"
	depends on FREETZ_SHOW_ADVANCED && \
		FREETZ_AVM_HAS_MULTI_ANNEX && \
		FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_DIFFS
	default n
	help
		This saves about 340-790 KB of uncompressed data size. Removes
		lib/modules/dsp_*/*-?-dsl.bin or lib/modules/*Vx180Code.bin.gz.
		Select this only if you don't use the the DSL modem. See
		https://web.archive.org/20200701000000/www.wehavemorefun.de/fritzbox/Multi-DSL-Firmware


config FREETZ_REMOVE_DSL_CONTROL
	bool "Remove dsl_control"
	depends on FREETZ_AVM_HAS_DSL_CONTROL && \
		( \
			FREETZ_REMOVE_ANNEX_A_FIRMWARE || \
			FREETZ_REMOVE_ANNEX_B_FIRMWARE || \
			FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_PRIME \
		)
	default n
	help
		Removes /usr/sbin/dsl_control. This saves about
		540-669 KB of uncompressed data size.
		Select this only if you don't use the the DSL modem. See
		https://web.archive.org/20200701000000/wehavemorefun.de/fritzbox/Dsl_control

config FREETZ_REMOVE_DSLD
	bool "Remove dsld"
	default n
	depends on FREETZ_AVM_HAS_DSLD
	select FREETZ_REMOVE_UPNP
	select FREETZ_REMOVE_KIDS if ! \
		( \
		FREETZ_TYPE_5140 || \
		FREETZ_TYPE_7112 || \
		FREETZ_TYPE_7113 || \
		FREETZ_TYPE_W501V \
		)
	help
		Remove DSL daemon (dsld), if you are planning to use your box as a simple
		IP client ("Internet mitbenuten") without routing.
		ATA ("via Lan1") and DSL mode will not work anymore.

		ATTENTION: You won't be able to use your box as a modem nor a router anymore.
		As well do *not* use this option if your ATA mode box uses PPoE passthrough,
		because in this case dsld is still needed! Furthermore, selecting this patch
		also selects the UPnP patch, because UPnP must be deactivated anyway for
		IP clients, otherwise dsld will be used again.
		You can find the UPnP settings in the German web UI under
		  Einstellungen
		    System
		      Netzwerkeinstellungen
		        Statusinformationen ueber UPnP uebertragen (empfohlen)
		Thirdly, the usermand patch will also be selected if you activate this option,
		because kernel module userman.ko always depends on kdsldmod.ko which is
		stripped by this patch.

config FREETZ_REMOVE_SHOWDSLDSTAT
	bool "Remove showdsldstat"
	default n
	depends on FREETZ_AVM_HAS_SHOWDSLDSTAT
	help
		Removes the showdsldstat utility which shows you the cpmac mode, connect time,
		external ip, route and dns servers. Also the state of IPv6, voip and tr069.
		Unsure a.t.m. if this tool is required by other AVM programs!
		AVM-WebDAV will be patched to not depend on showdsldstat (hopefully).

config FREETZ_REMOVE_PIGLET_V1_AVAILABLE
	bool
	default y if \
		(FREETZ_TYPE_7170 && ! FREETZ_TYPE_ALIEN_HARDWARE) || \
		FREETZ_TYPE_W701V_7170 || \
		FREETZ_TYPE_W900V_7170 || \
		FREETZ_TYPE_IAD_3331_7170
	default n

config FREETZ_REMOVE_PIGLET_V2_AVAILABLE
	bool
	default y if FREETZ_TYPE_7170
	default n

config FREETZ_REMOVE_PIGLET_ISDN_AVAILABLE
	bool
	default y if \
		(FREETZ_AVM_HAS_PIGLET_ISDN && FREETZ_REMOVE_DSLD && FREETZ_REMOVE_TELEPHONY) || \
		FREETZ_TYPE_7113 || FREETZ_TYPE_7113_7170 || \
		FREETZ_TYPE_7340 || FREETZ_TYPE_7340_7390
	default n

config FREETZ_REMOVE_PIGLET_POTS_AVAILABLE
	bool
	default y if \
		(FREETZ_AVM_HAS_PIGLET_POTS && FREETZ_REMOVE_DSLD && FREETZ_REMOVE_TELEPHONY) || \
		FREETZ_TYPE_7113 || FREETZ_TYPE_7113_7170 || \
		FREETZ_TYPE_7340 || FREETZ_TYPE_7340_7390
	default n

menu "Remove piglet"
	depends on \
		FREETZ_REMOVE_PIGLET_V1_AVAILABLE   || \
		FREETZ_REMOVE_PIGLET_V2_AVAILABLE   || \
		FREETZ_REMOVE_PIGLET_ISDN_AVAILABLE || \
		FREETZ_REMOVE_PIGLET_POTS_AVAILABLE

	config FREETZ_REMOVE_PIGLET_V1
	bool "Remove v1 piglet file(s)"
	depends on FREETZ_REMOVE_PIGLET_V1_AVAILABLE
	help
		The firmware of this model contains double piglet files. Which instance is needed depends
		on the hardware version (v1 or v2) of your box. You can safely remove the
		unneeded instance.

		Hint: If "echo $HWRevision_BitFileCount" returns "1" you could select this patch.

	config FREETZ_REMOVE_PIGLET_V2
	bool "Remove v2 piglet file(s)"
	depends on FREETZ_REMOVE_PIGLET_V2_AVAILABLE
	help
		The firmware of this model contains double piglet files. Which instance is needed depends
		on the hardware version (v1 or v2) of your box. You can safely remove the
		unneeded instance.

		Hint: If "echo $HWRevision_BitFileCount" returns "" (nothing) you could select this patch.

	comment "WARNING: Both (v1 and v2) piglet files are selected for removal."
	depends on FREETZ_REMOVE_PIGLET_V1 && FREETZ_REMOVE_PIGLET_V2

	config FREETZ_REMOVE_PIGLET_ISDN
	bool "Remove ISDN piglet file(s)"
	depends on FREETZ_REMOVE_PIGLET_ISDN_AVAILABLE
	help
		The firmware of this model contains separate piglet files for ISDN and POTS. Depending
		on your type of fixed line usage you can safely remove the unneeded bitfile(s).

		Hint: If you are using POTS fixed line you can try to select this
		patch. Be careful! Sometimes even POTS models are using the ISDN files
		and not the POTS ones. If your box ends up in a reboot cycle, you
		should deselect this patch and maybe want to try the other one, even
		if you are using POTS.

	config FREETZ_REMOVE_PIGLET_POTS
	bool "Remove POTS piglet file(s)"
	depends on FREETZ_REMOVE_PIGLET_POTS_AVAILABLE
	help
		The firmware of this model contains separate piglet files for ISDN and POTS. Depending
		on your type of fixed line usage you can safely remove the unneeded bitfile(s).

		Hint: If you are using ISDN fixed line you could select this patch.

	comment "WARNING: Both (ISDN and POTS) piglet files are selected for removal."
	depends on FREETZ_REMOVE_PIGLET_ISDN && FREETZ_REMOVE_PIGLET_POTS

endmenu

config FREETZ_REMOVE_ASSISTANT
	bool "Remove assistant (wizard)"
	default n
	depends on \
	! ( \
		( \
		FREETZ_TYPE_5124 || \
		FREETZ_TYPE_7140 || \
		FREETZ_TYPE_7170 \
		) \
		&& FREETZ_TYPE_LANG_EN \
	)
	help
		Removes the installation assistant from the web menu.

config FREETZ_REMOVE_ASSISTANT_SIP
	bool "Remove SIP assistant"
	default n
	depends on !FREETZ_TYPE_EXTENDER
	depends on FREETZ_REMOVE_ASSISTANT
	help
		Removes the SIP configuration assistant (about 155kB uncompressed) from
		the web menu. With this patch you can't create new phones, but change and
		use existing ones.

config FREETZ_REMOVE_UNTRUSTEDD
	bool "Remove UNTRUSTEDD - DEVELOPER"
	depends on FREETZ_SHOW_DEVELOPER
	depends on FREETZ_AVM_HAS_UNTRUSTEDD
	default n
	help
		This removes the untrustedd daemon (10kB uncompressed) and related
		service script. Known so far: Nothing.

config FREETZ_REMOVE_PLCD
	bool "Remove PLCD (powerline)"
	default n
	depends on FREETZ_AVM_HAS_PLCD
	help
		This removes the plcd daemon (44-76kB uncompressed) and related
		start script. Known so far: It is used to scan the network for
		PLC devices and show them on the webinterface in mesh/network.

config FREETZ_REMOVE_NEXUS
	bool "Remove NEXUS (AVM mesh)"
	default n
	depends on FREETZ_AVM_HAS_NEXUS && FREETZ_AVM_VERSION_06_9X
	help
		Removes "mesh" related files like
		the nexus daemon and some scripts.

config FREETZ_REMOVE_AHA
	bool "Remove AHA (AVM Home Automation)"
	default n
	depends on FREETZ_AVM_HAS_AHA
	help
		Remove the aha daemon and some related files.
		Used for "Smart Home".

		This patch only removes the files, not the settings in AVM's web interface.

config FREETZ_REMOVE_AURA_USB
	bool "Remove AURA (AVM USB Remote-Architecture)"
	default n
	depends on FREETZ_AVM_HAS_AURA_USB
	help
		Remove the aura-usb-daemon (remote USB connection, USB-Fernanschluss) and some
		related files.

		This patch only removes the files, not the settings in AVM's web interface.

config FREETZ_REMOVE_ETHERNET_OVER_USB
	bool "Remove ethernet-over-usb"
	depends on FREETZ_AVM_HAS_ETHERNET_OVER_USB
	select FREETZ_REMOVE_CDROM_ISO if FREETZ_AVM_HAS_CDROM_ISO
	default n
	help
		Removes avalanche_usb.ko to save 60kB uncompressed space.
		This is the Ethernet-over-USB driver which provides also CDROM emulation.

config FREETZ_REMOVE_WEBDAV
	bool "Remove WebDAV (AVM Online-Speicher)"
	depends on FREETZ_AVM_HAS_WEBDAV
	default n
	help
		Remove WebDAV (Online-Speicher) feature. Saves about 510 KB of
		uncompressed data size.
		On 7270v1 only scripts, links and a 10KB library.

config FREETZ_REMOVE_MEDIASRV
	bool "Remove mediasrv (UPnP/DLNA)"
	depends on FREETZ_AVM_HAS_MEDIASRV
	default n
	help
		Remove the MediaServer-daemon (mediasrv) and some other related files.
		This patch hides also the MediaServer options in the Web UI, so you must
		disable it before flashing the new image.
		Saves compressed 230 KB on a 7270_V2 and 40 KB on a 7170.

config FREETZ_REMOVE_NAS
	bool "Remove NAS"
	default n
	depends on FREETZ_AVM_HAS_NAS
	select FREETZ_REMOVE_MEDIASRV
	select FREETZ_REMOVE_WEBDAV if FREETZ_AVM_HAS_WEBDAV
	help
		Removes the AVM NAS Webinterface and internal memory file (saves about 390 KB in compressed image).

config FREETZ_REMOVE_MYFRITZ
	bool "Remove MyFritz"
	default n
	depends on FREETZ_AVM_HAS_MYFRITZ
	help
		Removes the AVM MyFritz Webinterface. Saves about 1.1 MB uncompressed data size.

		WARNING: Access by some AVM apps is no longer possible!

config FREETZ_REMOVE_DDNSD
	bool "Remove DDNSD"
	default n
	depends on FREETZ_AVM_HAS_DDNSD
	help
		Removes the Dynamic DNS daemon (saves about 70 KB in compressed image)

config FREETZ_REMOVE_FHEM
	bool "Remove FHEM"
	default n
	depends on FREETZ_AVM_HAS_FHEM
	help
		Removes the FHEM scripts and kernel modules (cdc_acm & ftdi_sio).
		This saves about 100 KB, uncompressed.

config FREETZ_REMOVE_AVM_VPN
	bool "Remove VPN"
	default n
	depends on FREETZ_AVM_HAS_VPN
	help
		Remove AVM's vpn and some other related files
		This patch removes the files and related Web UI entrys, but not the
		vpn settings. This will save about 120kB compressed size.

config FREETZ_REMOVE_WEBSRV
	bool "Remove websrv"
	depends on FREETZ_AVM_HAS_WEBSRV
	default n
	help
		Patch init scripts so BusyBox's httpd is used instead of AVM's websrv.
		The websrv binary will be removed from the firmware image.

		If "Remove UPnP daemon (igdd/upnpd)" patch is also selected, 'libwebsrv.so'
		will be removed too, because only those two binaries use it.

config FREETZ_REMOVE_TELNETD
	bool "Remove telnetd"
	depends on FREETZ_AVM_HAS_TELNETD
	default y
	help
		This disables the busybox applet for telnetd and removes the link to it.


config FREETZ_REMOVE_LANGUAGE
	bool "Remove languages"
	depends on FREETZ_AVM_HAS_MULTIPLE_LANGUAGES
	default n
	help
		This removes the selected language db /etc/htmltext_??.db
		files. Make sure you don't remove the active language!
		A single db file is 40-950 KB big.

comment "de"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_de

config FREETZ_REMOVE_LANGUAGE_en
	bool "en"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_en
	default y if FREETZ_TYPE_LANG_DE
	default n

config FREETZ_REMOVE_LANGUAGE_es
	bool "es"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_es
	default y

config FREETZ_REMOVE_LANGUAGE_fr
	bool "fr"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_fr
	default y

config FREETZ_REMOVE_LANGUAGE_it
	bool "it"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_it
	default y

config FREETZ_REMOVE_LANGUAGE_nl
	bool "nl"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_nl
	default y

config FREETZ_REMOVE_LANGUAGE_pl
	bool "pl"
	depends on FREETZ_REMOVE_LANGUAGE && FREETZ_AVM_HAS_LANGUAGE_pl
	default y


config FREETZ_REMOVE_BRANDING
	bool "Remove brandings"
	depends on FREETZ_AVM_HAS_MULTIPLE_BRANDINGS
	default n
	help
		Each branding provides the web UI templates for a certain manufacturer or OEM.

		NOTE: Make sure not to remove the branding corresponding to the one defined
		in your box's boot loader environment. It can be determined by calling the
		following command from the box's shell prompt:

		echo $(cat /proc/sys/urlader/firmware_version)

if FREETZ_REMOVE_BRANDING

	config FREETZ_REMOVE_BRANDING_1und1
		bool "1und1"
		depends on FREETZ_AVM_HAS_BRANDING_1und1
		default y if FREETZ_AVM_PROP_ALL_REGIONS && FREETZ_TYPE_LANG_EN
		default n
		help
			1&1 branding

	config FREETZ_REMOVE_BRANDING_aol
		bool "aol"
		depends on FREETZ_AVM_HAS_BRANDING_aol
		default n
		help
			AOL branding

	config FREETZ_REMOVE_BRANDING_avm
		bool "avm"
		depends on FREETZ_AVM_HAS_BRANDING_avm
		default y if FREETZ_AVM_PROP_ALL_REGIONS && FREETZ_TYPE_LANG_EN
		default n
		help
			AVM (german) branding

	config FREETZ_REMOVE_BRANDING_avme
		bool "avme"
		depends on FREETZ_AVM_HAS_BRANDING_avme
		default y if FREETZ_AVM_PROP_ALL_REGIONS && FREETZ_TYPE_LANG_DE
		default n
		help
			AVME (international) branding

	config FREETZ_REMOVE_BRANDING_ewetel
		bool "ewetel"
		depends on FREETZ_AVM_HAS_BRANDING_ewetel
		default n
		help
			EWE TEL branding

	config FREETZ_REMOVE_BRANDING_freenet
		bool "freenet"
		depends on FREETZ_AVM_HAS_BRANDING_freenet
		default n
		help
			Freenet branding

	config FREETZ_REMOVE_BRANDING_kabelbw
		bool "kabelbw"
		depends on FREETZ_AVM_HAS_BRANDING_kabelbw
		default n
		help
			Kabel Baden-Württemberg branding

	config FREETZ_REMOVE_BRANDING_kdg
		bool "kdg"
		depends on FREETZ_AVM_HAS_BRANDING_kdg
		default n
		help
			Kabel Deutschland GmbH branding

	config FREETZ_REMOVE_BRANDING_lgi
		bool "lgi"
		depends on FREETZ_AVM_HAS_BRANDING_lgi
		default n
		help
			Liberty Global Incorporated branding

	config FREETZ_REMOVE_BRANDING_otwo
		bool "otwo"
		depends on FREETZ_AVM_HAS_BRANDING_otwo
		default n
		help
			O2 branding

	config FREETZ_REMOVE_BRANDING_tcom
		bool "tcom"
		depends on FREETZ_AVM_HAS_BRANDING_tcom
		default n
		help
			Deutsche Telekom AG branding

	config FREETZ_REMOVE_BRANDING_unity
		bool "unity"
		depends on FREETZ_AVM_HAS_BRANDING_unity
		default n
		help
			Unitymedia GmbH branding

	config FREETZ_REMOVE_BRANDING_versatel
		bool "versatel"
		depends on FREETZ_AVM_HAS_BRANDING_versatel
		default n
		help
			Versatel branding

endif # FREETZ_REMOVE_BRANDING


config FREETZ_REMOVE_CAPIOVERTCP
	bool "Remove CAPIoverTCP"
	depends on FREETZ_AVM_HAS_PHONE
	default n
	help
		Remove CAPIoverTCP (capiotcp_server). Use this if you don't want to use
		Fritz!Fax or any other program that uses AVM's CAPIoverTCP. This is similar
		to rcapid, but independant.
		This will save about 15kB uncompressed size.

config FREETZ_REMOVE_CHRONYD
	bool "Remove chronyd"
	depends on FREETZ_AVM_HAS_CHRONYD
	default n
	help
		Removes AVM's time synchronization tool (chrony) and related files.
		This will save about 220kB uncompressed size.

config FREETZ_REMOVE_CDROM_ISO
	bool "Remove cdrom.iso"
	depends on FREETZ_AVM_HAS_CDROM_ISO
	default n
	help
		Removes the file /lib/modules/cdrom.iso to save 270kB uncompressed space.

config FREETZ_REMOVE_DECT
	bool "Remove DECT"
	depends on FREETZ_AVM_HAS_DECT
	default n
	help
		Remove dect files (modules, dect_manager and dect related Web UI).
		This saves 20K compressed size on W900V and 360k on 7240/7270.
		WARNING: While *configuring* telephony ctlmgr may crash and corrupt
		you settings!

config FREETZ_REMOVE_DECT_UPDATE
	bool "Remove dect_update"
	depends on FREETZ_TYPE_7150
	default n
	help
		Remove /usr/bin/dect_update. This utility is only needed to
		update the dect firmware.
		This will save about 32kB uncompressed size.

config FREETZ_REMOVE_DTRACE
	bool "Remove dtrace"
	depends on FREETZ_AVM_HAS_DTRACE
	default y
	help
		Remove /usr/bin/dtrace. This utility is only needed to trace ISDN D-channel.
		This will save about 87kB uncompressed size.

config FREETZ_REMOVE_FTPD
	bool "Remove ftpd"
	depends on \
		FREETZ_AVM_HAS_USB_HOST || \
		FREETZ_TYPE_7112_7170 || \
		FREETZ_TYPE_7113_7170 || \
		FREETZ_TYPE_W701V_7170
	default n
	help
		Remove FTP daemon (ftpd)
		This patch removes AVM's ftp daemon. The regular options in AVM's Webinterface
		are still present. If you select this item your USB drives won't be accessible
		through ftp anymore. But you can use Freetz bftpd/vsftpd package to grant ftp
		access to the devices.

config FREETZ_REMOVE_HELP
	bool "Remove help"
	default n
	help
		Removes the (offline) help pages from the web menu.

config FREETZ_REMOVE_LIBFUSE
	bool "Remove libfuse.so"
	depends on FREETZ_AVM_HAS_LIBFUSE
	select FREETZ_REMOVE_NTFS if FREETZ_AVM_HAS_NTFS && !FREETZ_AVMPLUGINS_NTFS
	select FREETZ_REMOVE_WEBDAV if FREETZ_AVM_HAS_WEBDAV
	default n
	help
		This removes libfuse.so and saves about 132 KB (uncompressed).
		NTFS and Webdav are also removed.

config FREETZ_REMOVE_EXT2
	bool "Remove ext2.ko"
	default n
	depends on FREETZ_AVM_HAS_EXT2_MODULE
	help
		Remove ext2.ko (about 81 kB uncompressed / 24 kB compressed).

config FREETZ_REMOVE_ISOFS
	bool "Remove isofs.ko"
	default n
	depends on FREETZ_AVM_HAS_ISOFS_MODULE
	help
		Remove isofs.ko (about 35 kB uncompressed).

config FREETZ_REMOVE_JFFS2
	bool "Remove jffs2.ko"
	depends on FREETZ_AVM_HAS_JFFS2_MODULE
	default n
	help
		If your AVM firmware contains the JFFS2 kernel module (jffs2.ko), this patch
		removes it, saving 144-192 kB of uncompressed firmware space. Use this patch
		if you have space problems in your firmware ("image too big").

		Please note that every functionality based on JFFS2, such as telephone
		answering machine (tam) storage without USB storage media, will no longer
		work. But if you have space problems to begin with, JFFS would be too small
		to store anything anyway. In either case it is preferable to store phone
		calls, fax documents etc. on a USB storage medium.

		This patch does *not* change any scripts which might require JFFS, so use at
		your own risk and test the firmware after flashing it onto your device.

config FREETZ_REMOVE_RAMZSWAP
	bool "Remove ramzswap.ko"
	default n
	depends on FREETZ_AVM_HAS_RAMZSWAP_MODULE
	help
		Remove ramzswap.ko (about 35 kB uncompressed).

config FREETZ_REMOVE_LSOF
	bool "Remove lsof"
	depends on FREETZ_AVM_HAS_LSOF
	default n
	help
		Remove /bin/lsof binary.
		This saves about 48 KB compressed space in kernel.image.

config FREETZ_REMOVE_SOCAT
	bool "Remove socat"
	depends on FREETZ_AVM_HAS_SOCAT
	default y
	help
		Remove /sbin/socat binary.
		This saves about 247 KB compressed space in kernel.image.

config FREETZ_REMOVE_MINID
	bool "Remove minid (Fritz!Mini and MT-D/F)"
	default n
	depends on FREETZ_AVM_HAS_MINID
	help
		Remove the mini-daemon (minid) and some other related files. This patch
		removes Fritz!Mini and MT-D/F support and all Web UI entrys.
		Saves compressed 660 KB on a 7270_V3 and 460 KB on a 7170.

		ATTENTION: You must remove all Fritz!Mini's from your Fritz!Box configuration
		and delete all Mini users with the Gini! software to avoid complications.

config FREETZ_REMOVE_FAT
	bool "Remove FAT"
	depends on FREETZ_AVM_HAS_FAT_MODULE && ! FREETZ_AUTOMOUNT_FAT
	default n
	help
		Remove FAT modules
		This patch will remove fat.ko, vfat.ko and msdos.ko.
		Be careful, mounting volumes with this filesystem will not work.
		It saves about 80-135K compressed space in kernel.image.

config FREETZ_REMOVE_NTFS
	bool "Remove NTFS"
	depends on FREETZ_AVM_HAS_NTFS && ! FREETZ_AVMPLUGINS_NTFS
	default n
	help
		Remove NTFS support
		This patch will remove ntfs-3g dependent files from the firmware.
		Be careful, mounting volumes with this filesystem will not work.
		It saves about 118K compressed space in kernel.image.

config FREETZ_REMOVE_NLS
	bool "Remove NLS"
	depends on FREETZ_AVM_HAS_NLS_MODULE
	default n
	help
		Remove NLS support
		This patch will remove all the nls_*.ko kernel module from the firmware.
		This may affect mounting FAT, NTFS and other filesystems.
		You can add some of the Freetz kernel nls modules if you need them.

config FREETZ_REMOVE_USBHOST
	bool "Remove USB Host"
	depends on FREETZ_AVM_HAS_USB_HOST
	default n
	help
		Remove USB Host
		This patch will remove all the kernel modules needed for the USB Host from the firmware.
		You will not be able to use USB storage or USB printers unless you provide a way to
		download and install these modules at runtime.
		Selecting this patch does not automatically select the patches to remove the
		kernel modules for the file systems (EXT2, FAT, NTFS, ...)

config FREETZ_REMOVE_PRINTSERV
	bool "Remove printserv"
	depends on FREETZ_AVM_HAS_PRINTSERV
	default n
	help
		Remove /sbin/printserv daemon. Select this patch if you don't want to
		connect a printer to your box or if you plan to use usb/ip package.
		Saves about 8 KB of compressed space.

config FREETZ_REMOVE_PRINTSERV_MODULE
	bool "Remove usblp.ko"
	depends on FREETZ_REMOVE_PRINTSERV && ! FREETZ_MODULE_usblp
	default n
	help
		Remove usblp kernel module. Without this module it's not possible to run
		a printer on your box. Saves about 12 KB of compressed space.

config FREETZ_REMOVE_RUNCLOCK
	bool "Remove run_clock"
	default n
	help
		Remove /bin/run_clock (operating hours meter) daemon.
		This saves about 5K compressed space in kernel.image.

config FREETZ_REMOVE_SAMBA
	bool "Remove Samba/NQCS"
	depends on (FREETZ_AVM_HAS_SAMBA_NQCS || FREETZ_AVM_HAS_SAMBA_SMBD) && ! FREETZ_PACKAGE_SAMBA_SMBD
	default n
	help
		Removes Samba daemons (smbd, and nmbd if available) or NQCS.
		This patch removes only the daemons. The regular options in
		AVM's webinterface are still present.

config FREETZ_REMOVE_SUPPORT
	bool "Remove support-files"
	default n
	help
		Remove the support-files which can be taken
		by http://fritz.box/html/support.html or
		http://fritz.box/support.lua

config FREETZ_REMOVE_SUPPORT_EVENTSDUMP
	bool "Remove eventsdump"
	depends on FREETZ_REMOVE_SUPPORT
	default n
	help
		Remove the eventsdump binary, saves about 6kB (uncompressed).
		With the file you could dump AVM's "Ereignisse" to the console.
		Seem to be use only by AVM's support-files.

config FREETZ_REMOVE_PUBKEY
	bool "Remove public firmware key" if FREETZ_SHOW_ADVANCED
	depends on FREETZ_AVM_HAS_SIGNATURE
	default n
	help
		Removes /etc/avm_firmware_public_key1, just 266 bytes.

		Because the signature validation will fail on update:
		 - You can't flash firmware from AVM with the AVM Webinterface anymore.
		 - Online-Update can't install updates automatically anymore, but is
		   still able to detect and inform you about new firmware versions.
		 - Most important: No more "spontaneous self updates". There are
		   several reports on the web, that AVM is sometimes disrespecting
		   your update settings to not automatically install new versions.
		   Such a spontaneous self update would remove Freetz.

		Beside that, it's still possible to flash any firmware by bootloader
		or Freetz. Updates for Dect devices are not affected by this patch
		because they are handled by *key2 on routers.

config FREETZ_REMOVE_PUBKEY_INHAUS
	bool "Remove inhaus firmware key"
	depends on FREETZ_REMOVE_PUBKEY && FREETZ_TYPE_FIRMWARE_INHAUS
	default y
	help
		Removes /etc/avm_firmware_public_key4 or
		/etc/avm_firmware_public_key3, just 266 bytes.

		Some inhaus firmwares use another file for signature validation,
		*key4 for router and *key3 for powerline & repeater devices.

config FREETZ_REMOVE_TR069
	bool "Remove tr069" if FREETZ_SHOW_ADVANCED
	depends on FREETZ_AVM_HAS_TR069
	select FREETZ_AVMDAEMON_DISABLE_TR069
	default n
	help
		Removes libtr069 to save space.

config FREETZ_REMOVE_TR064
	bool "Remove tr064" if FREETZ_SHOW_ADVANCED
	depends on FREETZ_REMOVE_TR069
	default n
	help
		Removes libtr064 to save space.

		WARNING: Access by some AVM apps is no longer possible!

config FREETZ_REMOVE_TR069_FWUPDATE
	bool "Remove fwupdate"
	depends on !FREETZ_BACKUP_EXPORT
	depends on FREETZ_REMOVE_TR069 && FREETZ_AVM_HAS_TR069_FWUPDATE
	depends on !FREETZ_AVM_HAS_PLUGINS_UPDATE || FREETZ_AVMPLUGINS_INTEGRATE
	default n
	help
		Removes the file /usr/bin/tr069fwupdate, needed for
		updating the firmware of dect devices.

config FREETZ_REMOVE_TR069_HTTPSDL
	bool "Remove httpsdl"
	depends on FREETZ_REMOVE_TR069 && FREETZ_AVM_HAS_TR069_FWUPDATE && FREETZ_REMOVE_TR069_FWUPDATE
	default y
	help
		Removes the file /usr/bin/httpsdl, used by:
		* tr069/fwupdate, you have removed it
		* firmware updater, with Freetz you don't want it
		* live-pictures from door clock (TFE)
		* some more ?
		This saves 15-45 KB of uncompressed data size.

config FREETZ_REMOVE_TR069_PROVIDERS
	bool "Remove ISP db"
	depends on FREETZ_AVM_VERSION_07_1X_MAX
	depends on FREETZ_REMOVE_TR069 && FREETZ_AVM_VERSION_05_2X_MIN && FREETZ_SHOW_EXPERT
	depends on !FREETZ_TYPE_EXTENDER
	default n
	help
		Removes /etc/default.${BOX}/${OEM}/providers-${ALC}.tar  files
		containing the defaults for many ISPs. Every branding has such
		a file with up to 310 KB of uncompressed data size for each.

		WARNING: Enable this patch only if
		  - you already have configured your internet connection, and
		  - don't use any predefined ISP.

config FREETZ_REMOVE_TR069_VOIPPROVIDERS
	bool "Remove VOIP db"
	depends on FREETZ_AVM_VERSION_07_1X_MAX
	depends on FREETZ_REMOVE_TR069 && FREETZ_AVM_VERSION_07_0X_MIN && FREETZ_SHOW_EXPERT
	depends on !FREETZ_TYPE_EXTENDER
	default n
	help
		Removes /etc/default.${BOX}/${OEM}/voip_providers-${ALC}.tar files
		containing the defaults for many VOIP providers. Every branding has
		such a file with more than 90 KB of uncompressed data size for each.

config FREETZ_REMOVE_UMTSD
	bool "Remove UMTS (USB GSM)"
	depends on FREETZ_AVM_HAS_UMTS
	default n
	help
		Remove UMTS support
		This patch will remove UMTS-dependent files from firmware.
		It saves about 12K compressed space in kernel.image.

config FREETZ_REMOVE_UPNP
	bool "Remove UPnP (igdd/upnpd)"
	depends on !FREETZ_TYPE_EXTENDER
	select FREETZ_AVMDAEMON_DISABLE_IGD
	select FREETZ_REMOVE_UPNP_LIBS if \
		FREETZ_TYPE_2170 || \
		FREETZ_TYPE_300IP || \
		FREETZ_TYPE_FON || \
		FREETZ_TYPE_5010 || \
		FREETZ_TYPE_5050 || \
		FREETZ_TYPE_5140 || \
		FREETZ_TYPE_WLAN || \
		FREETZ_TYPE_7050 || \
		FREETZ_TYPE_7113 || \
		(FREETZ_TYPE_7140 && FREETZ_TYPE_LANG_DE) || \
		FREETZ_TYPE_W501V || \
		FREETZ_TYPE_3020 || \
		FREETZ_TYPE_3030 || \
		FREETZ_TYPE_3130
	select FREETZ_REMOVE_TR069 if FREETZ_AVM_HAS_TR069
	select FREETZ_REMOVE_AURA_USB if FREETZ_AVM_HAS_AURA_USB
	default n
	help
		Remove Universal Plug'n'Play daemon 'igdd/upnpd' and some more files used by
		it from firmware. Patch init scripts so they can cope with the
		non-existent binary.

		WARNING: Don't select this if you are using an AVM Repeater with Guest-Wlan!

		ATTENTION: Fritz!Fax relies on UPnP.
		Make sure you deactivate all UPnP features in the web menu before
		updating the firmware with this option. It may not be harmful not
		to deactivate it, but there is no guarantee.
		You can find the settings in the German web UI under
		  Einstellungen
		    System
		      Netzwerkeinstellungen
		        Statusinformationen ueber UPnP uebertragen (empfohlen)

config FREETZ_REMOVE_UPNP_LIBS
	bool
	depends on FREETZ_REMOVE_UPNP
	default n

config FREETZ_REMOVE_KIDS
	bool "Remove kids (usermand/contfiltd)"
	depends on FREETZ_AVM_HAS_KIDS
	default n
	help
		Remove userman/contfiltd files (Kindersicherung)

config FREETZ_REMOVE_QOS
	bool "Remove QoS (tc)"
	depends on FREETZ_AVM_HAS_TC
	default n
	help
		Removes tc and some kernel modules.
		The command tc is used by dsld.

config FREETZ_REMOVE_AVM_E2FSPROGS
	bool "Remove e2fsprogs"
	depends on FREETZ_AVM_HAS_E2FSPROGS
	depends on !FREETZ_PATCH_UDEVMOUNT
	default n
	help
		Removes the e2fsprogs files (blkid, fsck, mkfs) and
		libraries. Saves about 220KB of compressed space.
		Warning: Without blkid the AVM scripts could not mount!

config FREETZ_REMOVE_VOIPD
	bool "Remove VoIP"
	depends on FREETZ_AVM_HAS_PHONE && !FREETZ_AVM_VERSION_06_5X_MIN
	default n
	help
		This removes the integrated sip-client and -server and the releated Web menu,
		normal telefon use (ISDN, POTS and DECT) is not affected. This saves 250 KB
		on a 7170/7270 of compressed firmware size.
		
		Do not select this option if you want to use the answering machine.

		ATTENTION: You must remove all sip phone numbers and all sip clients before
		flashing this image. Afterward there is no possibility to remove these numbers
		because the Web UI is also removed.

config FREETZ_REMOVE_TELEPHONY
	bool "Remove telephony"
	depends on FREETZ_AVM_HAS_PHONE && !FREETZ_AVM_VERSION_06_5X_MIN
	select FREETZ_REMOVE_DECT if FREETZ_AVM_HAS_DECT
	select FREETZ_REMOVE_VOIPD
	select FREETZ_REMOVE_DTRACE
	select FREETZ_REMOVE_CAPIOVERTCP
	select FREETZ_REMOVE_MINID if FREETZ_AVM_HAS_MINID
	default n
	help
		Radically remove a lot of telephony-related files. This patch saves about
		2370 KB or 2.3 MB of uncompressed data size in the firmware image. This
		means savings of about 700 KB of compressed firmware size.

		ATTENTION: Currently there have not been a whole lot of tests concerning
		side effects. The patch was successfully tested on a W701V IP client with
		removed UPnP/dsld/userman. If it still works for boxes including those
		functionalities, is unknown. Feel free to test it.

config FREETZ_REMOVE_WLAN
	bool "Remove WLAN"
	depends on FREETZ_AVM_HAS_WLAN && (FREETZ_AVM_VERSION_06_9X_MAX || FREETZ_TYPE_3390_3490) && FREETZ_SHOW_ADVANCED
	default n
	help
		Radically remove a lot of wlan-related files. This patch saves about
		700 kb of uncomrpessed data size in the firmware image.

		WARNING: Do not enable Wlan, you will get a reboot loop!

endmenu # "Removal patches" #



menu "Other patches"

comment "Web menu patches -----------------------------------------"

config FREETZ_PATCH_VCC
	bool "Patch 2nd VCC"
	depends on FREETZ_AVM_HAS_PHONE && FREETZ_TYPE_LANG_DE && FREETZ_AVM_VERSION_05_2X_MAX
	default n
	help
		Patches the setting for 2nd VCC into web menu. It also adds two additional
		settings (PCR & SCR) not available in the original AVM firmware.

		Please also note that it is not possible to change the value of traffic_class
		setting via the web-interface. You have to do it some other way (e.g. using
		FBEditor or nvi ar7.cfg).

		Warning: Please read up on what each VCC setting means before setting/changing it.
		Besides not working wrong values may cause additional costs for you as your provider
		may treat it as simultaneous dial-in attempts (Doppeleinwahl).

		The correct values for an 1&1-Komplettanschluss are:
		  VPI = 1;
		  VCI = 35;
		  traffic_class = atm_traffic_class_CBR;
		  pcr = 603;
		  scr = 0;

config FREETZ_PATCH_ATA
	bool "Patch ATA"
	depends on !FREETZ_TYPE_EXTENDER
	default n
	help
		Patches the ATA mode configuration pages into the web menu.

		The ATA-Mode (better: IP-Client Mode) disables the DSL modem
		and routing and reduces the power consumption of a box.

		Some models disable this feature, most models have brandings
		or environment configuration which disable the IP-Client Mode.
		This patch forces the ATA-Mode to be enabled.

		ATA will not work with some 7170/7140 due to limited hardware,
		see http://wiki.ip-phone-forum.de/gateways:avm:fbf:kabel

config FREETZ_PATCH_GUEST
	bool "Patch GUEST"
	depends on !FREETZ_TYPE_EXTENDER
	depends on FREETZ_AVM_VERSION_06_0X_MIN
	depends on FREETZ_AVM_VERSION_06_2X_MAX
	default n
	help
		Enables the GUEST configuration options in ip-client mode.
		DHCP may not work on the guest network interface, and need to
		be set up manually.

config FREETZ_PATCH_ENUM
	bool "Patch enum"
	depends on \
		FREETZ_TYPE_LANG_DE && \
		( \
		FREETZ_TYPE_FON || \
		FREETZ_TYPE_300IP || \
		FREETZ_TYPE_5050 || \
		FREETZ_TYPE_WLAN || \
		FREETZ_TYPE_7050 || \
		FREETZ_TYPE_7140 \
		)
	default n
	help
		Patches the enum configuration pages into the web menu.

config FREETZ_PATCH_BETA_ATTRIBUTES
	bool "Patch Beta/Labor attributes"
	depends on \
		FREETZ_AVM_VERSION_05_2X && \
		!FREETZ_TYPE_ALIEN_HARDWARE && \
		FREETZ_TYPE_LANG_DE && \
		( \
		FREETZ_TYPE_7270_16 || \
		FREETZ_TYPE_7390 \
		)
	default y
	help
		This patch removes Beta/Labor attributes from some
		(older) firmwares AVM released only as Betas so far.

config FREETZ_PATCH_DSL_EXPERT
	bool "Patch extended DSL settings"
	depends on \
		! FREETZ_REMOVE_DSLD && \
		FREETZ_AVM_VERSION_05_2X_MAX && \
		( \
			FREETZ_TYPE_3270 || \
			FREETZ_TYPE_3370 || \
			FREETZ_TYPE_6840 || \
			FREETZ_TYPE_7240 || \
			FREETZ_TYPE_7270_16 || \
			FREETZ_TYPE_7312 || \
			FREETZ_TYPE_7320 || \
			FREETZ_TYPE_7330 || \
			FREETZ_TYPE_7340 || \
			FREETZ_TYPE_7360 || \
			FREETZ_TYPE_7390 || \
			FREETZ_TYPE_7570 \
			|| \
			FREETZ_TYPE_7112 || \
			FREETZ_TYPE_7270_V1 \
			|| \
			FREETZ_TYPE_5113 || \
			FREETZ_TYPE_5124 || \
			FREETZ_TYPE_7113 || \
			FREETZ_TYPE_7140 || \
			FREETZ_TYPE_7141 || \
			FREETZ_TYPE_7170 \
		)
	default n
	help
		Patches the extended dsl-settings from labor-dsl into all-in-one-firmwares.

config FREETZ_ADD_REGEXT_GUI
	bool "Patch GUI to enable external SIP connections"
	depends on \
		FREETZ_TYPE_7570 || \
		( FREETZ_AVM_VERSION_05_2X_MAX && \
			FREETZ_TYPE_LANG_DE && ( \
				FREETZ_TYPE_7170 || \
				FREETZ_TYPE_7240 || \
				FREETZ_TYPE_7270 || \
				FREETZ_TYPE_7390 \
			) \
		)
	default n
	help
		Patches the WebUI and add a checkbox to enable setting "reg_from_outside" in the voip.conf.

config FREETZ_PATCH_FAXPAGES
	bool "Patch FAX pages"
	depends on \
		FREETZ_AVM_HAS_FAX && \
		! FREETZ_REMOVE_TELEPHONY
	default n
	help
		Patches the WebUI to allow sending multiple fax pages.
		Just select multiple picture files in the upload dialog.

config FREETZ_PATCH_GSMVOICE
	bool "Patch GSM voice"
	depends on \
		FREETZ_AVM_HAS_UMTS && \
		! FREETZ_REMOVE_UMTSD && \
		! FREETZ_TYPE_7270_V1
	default n
	help
		Patches the WebUI to allow voice-over-GSM.
		Highly experimental! Your UMTS stick has to support it.
		Webif: Internet > Mobilfunk > Telefonie ueber Mobilfunk

config FREETZ_PATCH_ALARMCLOCK
	bool "Patch third alarm-clock"
	depends on !FREETZ_REMOVE_TELEPHONY && \
		( \
		FREETZ_TYPE_7150 || \
		FREETZ_TYPE_7112 || \
		FREETZ_TYPE_7141 || \
		(FREETZ_TYPE_7170 && FREETZ_TYPE_LANG_DE) || \
		FREETZ_TYPE_7270_V1 || \
		FREETZ_TYPE_7570 \
		)
	default n
	help
		Adds a third alarm-clock to AVM-Webinterface

config FREETZ_PATCH_VOL_COUNTER
	bool "Restore volume counter support"
	depends on FREETZ_TYPE_7412 && FREETZ_AVM_VERSION_06_8X
	default n
	help
		Adds volume counter support removed by AVM
		for some (probably marketing) reasons.

config FREETZ_PATCH_WEBIF_FEATURES
	bool "Patch webif features"
	depends on FREETZ_AVM_VERSION_07_1X_MAX
	default y
	help
		This enables the scripts in patches/cond/800-webif_features/
		which patch some webif features, currently
		 210-patch_hostname.sh
		 811-show_tr069_config.sh
		 812-show_update_config.sh
		 821-show_network_repeater.sh
		 822-show_dvb_services.sh

config FREETZ_PATCH_SIGNED
	bool "Patch web menu signed message"
	default n
	help
		Hides the "unsupported changes" message from the web interface.

config FREETZ_PATCH_SECURE
	bool "Patch web menu secure message"
	depends on !FREETZ_TYPE_EXTENDER && FREETZ_AVM_VERSION_07_2X_MIN
	select FREETZ_PATCH_SECURE_2fa if !FREETZ_PATCH_SECURE_sip
	default n
	help
		Hides the "unsecure settings" message from the web interface.

config FREETZ_PATCH_SECURE_2fa
	bool "Caused by twofactor_disabled"
	depends on FREETZ_PATCH_SECURE
	default y
	help
		twofactor_disabled does not trigger the message.

config FREETZ_PATCH_SECURE_sip
	bool "Caused by ipphone_from_outside"
	depends on FREETZ_PATCH_SECURE
	default n
	help
		ipphone_from_outside does not trigger the message.

config FREETZ_MODIFY_DSL_WARNING
	bool "Patch DSL modified message"
	depends on FREETZ_TYPE_DSL && FREETZ_AVM_VERSION_06_5X_MIN && !FREETZ_REMOVE_DSLD && !FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_PRIME
	default n
	help
		Hides the "modified" message from the DSL page.

config FREETZ_MODIFY_DSL_SPECTRUM
	bool "Extend DSL spectrum"
	depends on FREETZ_TYPE_DSL && FREETZ_AVM_VERSION_06_5X_MIN && !FREETZ_REMOVE_DSLD && !FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_PRIME
	default n
	help
		Shows DSL spectrum page with min/man visible initialy.

config FREETZ_MODIFY_DSL_SETTINGS
	bool "Extend DSL settings"
	depends on FREETZ_TYPE_DSL && FREETZ_AVM_VERSION_06_5X_MIN && !FREETZ_REMOVE_DSLD && !FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_PRIME
	default n
	help
		Extends the DSL settings page with "speed" settings.

config FREETZ_MODIFY_COUNTER
	bool "Extend online counter"
	depends on !FREETZ_TYPE_EXTENDER && FREETZ_AVM_VERSION_06_5X_MIN && !FREETZ_REMOVE_DSLD
	default n
	help
		Converts counter hours to days and traffic MB to GB.

config FREETZ_ENABLE_LED_DEACTIVATION
	bool "Enable LED deactivation page"
	depends on FREETZ_AVM_HAS_LEDPAGE
	depends on FREETZ_AVM_VERSION_07_0X_MAX
	default n
	help
		Re-enables access to the LED deactivation page in expert mode.

config FREETZ_PATCH_MODFS_ANNEX_SELECTION
	bool "Unhide Annex selection"
	depends on FREETZ_AVM_VERSION_07_1X_MAX
	depends on FREETZ_TYPE_DSL && FREETZ_AVM_HAS_MULTI_ANNEX && FREETZ_AVM_HAS_ANNEX_SELECTION
	depends on !FREETZ_REMOVE_MULTI_ANNEX_FIRMWARE_PRIME
	depends on FREETZ_TYPE_LANG_DE
	default n
	help
		Unhides Annex selection in Fritz!OS web interface.

config FREETZ_PATCH_MODFS_BOOT_MANAGER
	bool "Add boot manager"
	depends on FREETZ_AVM_VERSION_06_5X_MIN
	depends on FREETZ_AVM_HAS_SEPARATE_FILESYSTEM_IMAGE
	default n
	help
		Extends the "reboot" page of FRITZ!OS to select system version and branding.

if FREETZ_AVM_HAS_USB_HOST
comment "USB patches ----------------------------------------------"

menuconfig FREETZ_PATCH_UDEVMOUNT
	bool "Add udevmount"
	depends on FREETZ_AVM_HAS_UDEV && FREETZ_AVM_HAS_USB_HOST && !FREETZ_PATCH_FREETZMOUNT
	default y
	help
		Adds a mount/unmount hook to:
		 - Automatically start/stop external.
		 - Execute autorun.sh/autoend.sh.
		 - Terminate programs blocking unmount.
		 - Logging of (un)mount events.

if FREETZ_PATCH_UDEVMOUNT

	comment "Intern NTFS"
		depends on FREETZ_AVM_HAS_NTFS && !FREETZ_REMOVE_NTFS
	config FREETZ_UDEVMOUNT_NTFS
		bool "Select NTFS"
		depends on !FREETZ_AVM_HAS_NTFS || FREETZ_REMOVE_NTFS
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_PACKAGE_NTFS
		default n
		help
			This adds ntfs-3g mount helper to your firmware.

	comment "Intern Fat"
		depends on FREETZ_AVM_HAS_FAT_MODULE && !FREETZ_REMOVE_FAT
	config FREETZ_UDEVMOUNT_FAT
		bool "Select Fat"
		depends on !FREETZ_AVM_HAS_FAT_MODULE || FREETZ_REMOVE_FAT
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_fat
		default n
		help
			This adds fat module to your firmware.

	comment "Intern Ext2"
		depends on FREETZ_AVM_HAS_EXT2_FS_BUILTIN
	config FREETZ_UDEVMOUNT_EXT2
		bool "Select Ext2"
		depends on !FREETZ_AVM_HAS_EXT2_FS_BUILTIN
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_ext2
		default n
		help
			This adds ext2 module to your firmware.

	comment "Intern Ext3"
		depends on FREETZ_AVM_HAS_EXT3_FS_BUILTIN
	config FREETZ_UDEVMOUNT_EXT3
		bool "Select Ext3"
		depends on !FREETZ_AVM_HAS_EXT3_FS_BUILTIN
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_ext3
		default y
		help
			This adds ext3 module to your firmware.

	comment "Intern Ext4"
		depends on FREETZ_AVM_HAS_EXT4_FS_BUILTIN && FREETZ_KERNEL_VERSION_2_6_28_MIN
	config FREETZ_UDEVMOUNT_EXT4
		bool "Select Ext4"
		depends on !FREETZ_AVM_HAS_EXT4_FS_BUILTIN && FREETZ_KERNEL_VERSION_2_6_28_MIN
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_ext4
		default y
		help
			This adds ext4 module to your firmware.

	config FREETZ_UDEVMOUNT_HFS
		bool "Select HFS"
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_hfs
		default n
		help
			This adds hfs module to your firmware.

	config FREETZ_UDEVMOUNT_HFS_PLUS
		bool "Select HFS+"
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_hfsplus
		default n
		help
			This adds hfs+ module to your firmware.

	config FREETZ_UDEVMOUNT_REISER_FS
		bool "Select ReiserFS"
		depends on FREETZ_REPLACE_MODULE_AVAILABLE
		select FREETZ_MODULE_reiserfs
		default n
		help
			This adds reiserfs module to your firmware.

endif # FREETZ_PATCH_UDEVMOUNT

config FREETZ_PATCH_FREETZMOUNT
	bool "Add FREETZMOUNT"
	depends on FREETZ_AVM_VERSION_06_5X_MAX
	select FREETZ_REMOVE_AVM_E2FSPROGS if FREETZ_AVM_HAS_E2FSPROGS
	select FREETZ_USBSTORAGE_AUTOMOUNT
	select FREETZ_BUSYBOX_BLKID
	select FREETZ_BUSYBOX_FEATURE_BLKID_TYPE
	select FREETZ_BUSYBOX_VOLUMEID
	default y
	help
		1. Replaces and deselects usb-storage patch.
		   - The names of USB storage directories can be defined by WebIF (default uStorXY) (or by volume LABEL).
		2. Replaces and deselects autorun.sh/autoend.sh patch.
		   - autorun/autoend behaviour can be activated/deactivated via WebIF.
		   - autorun/autoend are useful to start/terminate applications located on USB devices, eg
		     apache, samba or even swapfiles, after connecting or before disconnecting of USB devices.
		3. Auto-mounted USB storage devices will be fully accessible, eg it is now possible to put
		   user home directories for (e.g. for FTP) on a FAT32-formatted partition and permit shell
		   and FTP users to actually write to their own home directories.
		4. Avoid deleting whole filesystems on USB devices.
		5. Enhanced behaviour during mounting and unmounting.
		6. Provides mount-by-label feature.

		It is highly recommended to select this patch.

config FREETZ_USBSTORAGE_AUTOMOUNT
	bool "Automount filesystems"
	depends on FREETZ_PATCH_FREETZMOUNT
	default y
	help
		The filesystems ext2, ext3, ext4, fat, hfs, hfs+, ntfs and reiserfs and swap are mounted
		automatically. Detection is done by blkid applet . It depends on the original firmware
		which of the following points you have to select.

if FREETZ_USBSTORAGE_AUTOMOUNT
config FREETZ_AUTOMOUNT_EXT2
	bool "ext2"
	depends on (FREETZ_REPLACE_MODULE_AVAILABLE || FREETZ_AVM_HAS_EXT2_FS_BUILTIN) # && any kernel version
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_EXT
	select FREETZ_MODULE_ext2 if ! FREETZ_AVM_HAS_EXT2_FS_BUILTIN
	default n
	help
		This adds support for ext2 filesystem to your firmware.

config FREETZ_AUTOMOUNT_EXT3
	bool "ext3"
	depends on (FREETZ_REPLACE_MODULE_AVAILABLE || FREETZ_AVM_HAS_EXT3_FS_BUILTIN) # && any kernel version
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_EXT
	select FREETZ_MODULE_ext3 if ! FREETZ_AVM_HAS_EXT3_FS_BUILTIN
	default y if FREETZ_AVM_HAS_EXT3_FS_BUILTIN
	default n
	help
		This adds support for ext3 filesystem to your firmware.

config FREETZ_AUTOMOUNT_EXT4
	bool "ext4"
	depends on (FREETZ_REPLACE_MODULE_AVAILABLE || FREETZ_AVM_HAS_EXT4_FS_BUILTIN) && FREETZ_KERNEL_VERSION_2_6_28_MIN
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_EXT
	select FREETZ_MODULE_ext4 if ! FREETZ_AVM_HAS_EXT4_FS_BUILTIN
	default y if FREETZ_AVM_HAS_EXT4_FS_BUILTIN
	default n
	help
		This adds support for ext4 filesystem to your firmware.

config FREETZ_AUTOMOUNT_FAT
	bool "fat"
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_FAT
	default y
	help
		This enables detection of fat partitions.

config FREETZ_AUTOMOUNT_HFS
	bool "HFS"
	depends on FREETZ_REPLACE_MODULE_AVAILABLE
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_HFS
	select FREETZ_MODULE_hfs
	default n
	help
		This adds hfs module to your firmware.

config FREETZ_AUTOMOUNT_HFS_PLUS
	bool "HFS+"
	depends on FREETZ_REPLACE_MODULE_AVAILABLE
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_HFS
	select FREETZ_MODULE_hfsplus
	default n
	help
		This adds hfs+ module to your firmware.

config FREETZ_AUTOMOUNT_LUKS
	bool "luks"
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_LUKS
	default n
	help
		This enables detection (not mounting) of luks partitions.

config FREETZ_AUTOMOUNT_NTFS
	bool "NTFS"
	depends on (FREETZ_AVM_HAS_NTFS && !FREETZ_REMOVE_NTFS) || FREETZ_REPLACE_MODULE_AVAILABLE
	select FREETZ_PACKAGE_NTFS if FREETZ_REMOVE_NTFS || ! FREETZ_AVM_HAS_NTFS
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_NTFS
	default y if FREETZ_AVM_HAS_NTFS && ! FREETZ_REMOVE_NTFS
	default n
	help
		This adds ntfs-3g mount helper to your firmware.

config FREETZ_AUTOMOUNT_REISER_FS
	bool "ReiserFS"
	depends on FREETZ_REPLACE_MODULE_AVAILABLE
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_REISERFS
	select FREETZ_MODULE_reiserfs
	default n
	help
		This adds reiserfs module to your firmware.

config FREETZ_AUTOMOUNT_LINUXSWAP
	bool "swap"
	select FREETZ_BUSYBOX_FEATURE_VOLUMEID_LINUXSWAP
	default n
	help
		This enables detection of linux-swap partitions.

endif

config FREETZ_PATCH_MAXDEVCOUNT
	bool "Raise the count of connectable usb device to 9"
	default n
	help
		Use this patch if you would connect more than 3 device to the box

config FREETZ_PATCH_MULTIPLE_PRINTERS
	bool "Add support for multiple printers"
	depends on FREETZ_AVM_HAS_PRINTSERV && ! FREETZ_REMOVE_PRINTSERV && \
		( \
		( FREETZ_TYPE_7140 && ! FREETZ_TYPE_LANG_DE ) || \
		FREETZ_TYPE_7570 || \
		FREETZ_TYPE_5124 || \
		FREETZ_TYPE_2170 || \
		FREETZ_TYPE_3131 || \
		FREETZ_TYPE_3170 || \
		FREETZ_TYPE_7141 || \
		FREETZ_TYPE_7150 || \
		FREETZ_TYPE_7170 || \
		FREETZ_TYPE_7270_V1 \
		)
		# no patch available atm: 7140_DE 2070 3070 3050 3130
	select FREETZ_BUSYBOX_HEXDUMP
	default n
	help
		Use this patch if you want to use more than one printer.

config FREETZ_MODIFY_UMTSD
	bool "Modify umtsd: only for known modems"
	depends on FREETZ_AVM_HAS_UMTS && FREETZ_AVM_HAS_UDEV && !FREETZ_REMOVE_UMTSD && !FREETZ_AVM_VERSION_07_0X_MIN
	default n
	help
		AVM's umtsd will only be started if a *known* umts modem is
		detected. So your /dev/ttyUSB? could be used by other programs.

config FREETZ_CUSTOM_UDEV_RULES
	bool "Enable custom UDEV rules"
	depends on FREETZ_AVM_HAS_UDEV
	default n
	help
		You could use own rules for UDEV.

config FREETZ_DROP_NOEXEC_EXTERNAL
	bool "Drop noexec for (external) storages"
	depends on FREETZ_AVM_HAS_NOEXEC
	default n
	help
		Allows to execute files on external
		storages like USB sticks and HDDs.

endif

comment "Replacement patches --------------------------------------"

config FREETZ_KEEP_AVM_UCLIBC
	bool "Keep AVM uClibc - FOR TESTING PURPOSES ONLY"
	depends on !FREETZ_SEPARATE_AVM_UCLIBC
	depends on FREETZ_SHOW_EXPERT && \
		( \
		(FREETZ_AVM_UCLIBC_0_9_28 && FREETZ_TARGET_UCLIBC_0_9_28) || \
		(FREETZ_AVM_UCLIBC_0_9_29 && FREETZ_TARGET_UCLIBC_0_9_29) || \
		(FREETZ_AVM_UCLIBC_0_9_32 && FREETZ_TARGET_UCLIBC_0_9_32) || \
		(FREETZ_AVM_UCLIBC_0_9_33 && FREETZ_TARGET_UCLIBC_0_9_33) || \
		(FREETZ_AVM_UCLIBC_1_0_14 && FREETZ_TARGET_UCLIBC_1_0_14)    \
		) && \
		FREETZ_REAL_DEVELOPER_ONLY
	default n

comment "Replace OpenSSL libraries (not available, requires openssl-0.9.8)"
	depends on FREETZ_SHOW_ADVANCED && \
		FREETZ_AVM_HAS_OPENSSL_VERSION_0 && !FREETZ_OPENSSL_VERSION_0

config FREETZ_REPLACE_OPENSSL
	bool "Replace OpenSSL libraries"
	depends on FREETZ_SHOW_ADVANCED && \
		FREETZ_AVM_HAS_OPENSSL_VERSION_0 &&  FREETZ_OPENSSL_VERSION_0
	select FREETZ_LIB_libcrypto
	select FREETZ_LIB_libssl
	default n
	help
		Use this option only if you are running out of space and if you
		really know, what you are doing.
		Activating this option may cause an unstable system, uncontrolled reboots
		and other side effects.

		Activating this option saves about 400KB in the image.

config FREETZ_REPLACE_OUTER_UCLIBC_AND_BUSYBOX
	bool "Replace uClibc and BusyBox in outer image"
	depends on FREETZ_AVM_HAS_INNER_OUTER_FILESYSTEM
	depends on !FREETZ_SEPARATE_AVM_UCLIBC
	default n
	help
		This replaces uClibc and BusyBox in the outer image by
		a self built version.
		This could cause a bad configurstion like missing applets.
		The worst case is a not booting image.

config FREETZ_REPLACE_DTRACE
	bool "Replace dtrace"
	depends on FREETZ_REMOVE_DTRACE
	default n
	help
		Dtrace will be replaced by a symlink to /tmp/flash/mod/dtrace.
		Activating this option lets you execute a custom action via
		phone using #97*3* keycode sequence.

config FREETZ_REPLACE_ONLINECHANGED
	bool "Replace onlinechanged - EXPERIMENTAL"
	depends on FREETZ_SHOW_ADVANCED
	default n
	help
		AVM's built-in onlinechanged is not reliably called on some DSL boxes for
		unknown reasons (see http://www.ip-phone-forum.de/showthread.php?t=231873).
		On boxes behind a NAT, e.g. on many IP clients, behind cable routers etc.,
		onlinechanged is not triggered either because dsld is not responsible for the
		connection. Thus, services on such boxes cannot be reinitialised automatically
		after the external IP address has changed.

		This is where this patch can be useful: It starts a shell script
		/sbin/ip_watchdog via /etc/inittab and makes sure the script is automatically
		restarted (via "respawn") in case it is terminated accidentally. The script
		periodically (60 s) checks the external IP via /usr/bin/get_ip and calls AVM's
		and Freetz's onlinechanged scripts via /bin/onlinechanged.sh if the IP has
		changed. At the same time the patch ensures that AVM's master script
		/bin/onlinechanged is empty, so the scripts are not called twice.

		Who should use this patch? First of all users with boxes configured for NAT
		who cannot profit from AVM onlinechanged at all. Secondly users having
		problems with AVM onlinechanged being called unreliably on their DSL boxes.

		Limitations: Environment variable IPADDR is set as usual, but no other
		variables set by AVM multid in original onlinechanged such as NETMASK,
		GATEWAY, DNS1, DNS2. They are currently not used by AVM or Freetz scripts
		anyway, so this limitation should not be a problem. Another difference to AVM
		onlinechanged is that this solution only calls "onlinechanged online",
		never "onlinechanged offline". This also should not be a problem, but you
		should be aware of it.

comment "Additional patches ---------------------------------------"

config FREETZ_ADD_TELNETD
	bool "Add telnetd"
	depends on !FREETZ_AVM_HAS_TELNETD
	default n
	help
		Adds the busybox applet for telnetd, its link and the configuration webif.

config FREETZ_ADD_SWAPOPTIONS
	bool "Add swap options"
	depends on FREETZ_AVM_HAS_SWAP_BUILTIN || FREETZ_REPLACE_KERNEL
	default n
	select FREETZ_PACKAGE_MOD_SWAPOPTIONS
	help
		Add swap configuration options.

config FREETZ_ADD_ETCSERVICES
	bool "Add /etc/services"
	default y
	select FREETZ_PACKAGE_MOD_ETCSERVICES
	help
		Adds /etc/services file.
		Used eg by netstat to display names of IP-ports.

config FREETZ_ADD_ETCNETCONFIG
	bool "Add /etc/netconfig"
	default n
	select FREETZ_PACKAGE_MOD_ETCNETCONFIG
	help
		Adds /etc/netconfig file.
		Used eg by libtirpc and rpcbind.

config FREETZ_ADD_ANNEX_A_FIRMWARE
	bool "Add Annex A firmware file"
	depends on FREETZ_TYPE_7270_V1
	default n
	help
		Add lib/modules/dsp_ur8/ur8-A-dsl.bin. This costs about 400 KB of
		uncompressed data size. But you can remove Annex B file if you
		plan to use Annex A.

config FREETZ_ENFORCE_URLADER_SETTINGS
	bool "Enforce urlader environment"
	depends on FREETZ_SHOW_ADVANCED
	default n
	help
		Enforce some urlader (Adam2/EVA) environment variables.
		 * useful for tcom boxes having non-AVM standard settings in bootloader
		   (my_ipaddress, firmware_version, ProductID)
		 * useful for people that do clear mtd3/mtd4 often.
		This settings are enforced at the beginnig of the boot process.

config FREETZ_ENFORCE_URLADER_SETTING_FIRMWARE_VERSION
	depends on FREETZ_ENFORCE_URLADER_SETTINGS
	string "Enforce firmware_version variable"
	default "avm" if FREETZ_TYPE_IAD_3331_7170
	help
		Choose wisely. Your image beeing built must support this.
		Typical settings are eg.: avm, avme, tcom, 1und1, ...
		If this is empty the urlader setting won't be touched.

config FREETZ_ENFORCE_URLADER_SETTING_PRODUCTID
	depends on FREETZ_ENFORCE_URLADER_SETTINGS
	string "Enforce ProductID variable"
	default ""
	help
		Choose wisely. Your image beeing built must support this.
		Typical settings are eg.: Fritz_Box_DECT_7270, Fritz_Box_DECT_W920V
		If this is empty the urlader setting won't be touched.

config FREETZ_ENFORCE_URLADER_SETTING_MY_IPADDRESS
	depends on FREETZ_ENFORCE_URLADER_SETTINGS
	string "Enforce my_ipaddress variable"
	default ""
	help
		This is the AVM default, enforce to also to reseller boxes, eg. from T-Com
		If this is empty the urlader setting won't be touched.

config FREETZ_ENFORCE_FIRMWARE_VERSION_VIA_RCCONF
	depends on FREETZ_AVM_VERSION_06_5X_MIN
	string "Enforce firmware_version via rc.conf"
	default ""
	help
		This option enforces branding by hardcoding it in /etc/init.d/rc.conf

		This method is useful on some recently produced boxes (since 2017), which
		do not allow to change the value of the urlader variable 'firmware_version'
		in a non-volatile way.

		Affected boxes (known so far): all boxes with the following bootloaderVersion
		 - 1.3179
		 - 1.3229
		use "cat /proc/sys/urlader/environment | grep bootloaderVersion" or EVA
		to check the value

		Choose the value wisely. Your image must support it.

comment "Misc patches ---------------------------------------------"

config FREETZ_PATCH_W920V_LED_MODULE
	bool "Change LED semantics to W920V"
	default y
	depends on FREETZ_TYPE_W920V_7570 && FREETZ_AVM_VERSION_04_XX
	help
		If Y is choosen, this changes the semantics of the LEDs on the front
		panel of your 7570/W920V box fitting the descriptions of the W920V.

config FREETZ_DISABLE_SERIAL_CONSOLE
	bool "Disable console on serial port"
	default n
	help
		Choose this if you do not want your Box to start a console/shell on
		its serial port (/dev/ttyS0). This is particularly helpful if you
		want to use the serial port exclusively with another application,
		e.g. minicom.

config FREETZ_PATCH_DISABLE_AVM_WATCHDOG
	bool "Disable AVM watchdog - DEVELOPER"
	depends on FREETZ_SHOW_DEVELOPER
	default n
	help
		This disables the AVM watchdog on system start.
		The AVM watchdog reboots the device if
		 - system start takes longer than 2, 4 or 8 minutes
		 - some defined AVM daemon crashes

config FREETZ_RESTORE_DEBUG_CFG_SUPPORT
	bool "Restore support for /var/flash/debug.cfg"
	depends on FREETZ_AVM_VERSION_07_1X_MAX
	depends on !FREETZ_AVM_HAS_DEBUG_CFG_SUPPORT
	default n
	help
		Restores support for /var/flash/debug.cfg removed by AVM
		for security reasons in Fritz!OS 6.20 (6.0x on some boxes).

config FREETZ_DISABLE_DEBUG_CFG_SUPPORT
	bool "Disable processing of /var/flash/debug.cfg"
	depends on FREETZ_AVM_HAS_DEBUG_CFG_SUPPORT
	default n
	help
		Disables processing of /var/flash/debug.cfg while booting.

		Note: /var/flash/debug.cfg is still available, it's however
		not processed while booting.

		Warning: if selected you won't be able to install/start
		such 3rd-party extensions like FHEM, LCR Updater, etc.

config FREETZ_ASYNCHRONOUS_DEBUG_CFG
	bool "Process /var/flash/debug.cfg asynchronously"
	depends on ( FREETZ_AVM_HAS_DEBUG_CFG_SUPPORT && !FREETZ_DISABLE_DEBUG_CFG_SUPPORT) \
		|| (!FREETZ_AVM_HAS_DEBUG_CFG_SUPPORT &&  FREETZ_RESTORE_DEBUG_CFG_SUPPORT)
	default n
	help
		Enables asynchronous processing of /var/flash/debug.cfg.

		Requires AVM's /sbin/delay binary in order to work.

config FREETZ_RUN_TELEFON_IN_INHAUS_MODE
	bool "Run telefon daemon in inhaus mode"
	depends on FREETZ_AVM_HAS_PHONE
	depends on !FREETZ_AVM_HAS_TELNETD
	default y if FREETZ_ADD_TELNETD
	default n
	help
		Running telefon daemon in "inhaus mode" restores:
		 - Processing of /var/flash/calllog on incoming calls.
		In case you added telnetd, this patch also restores:
		 - Support for telnetd on/off by phone (#96*7* / #96*8*).
		 - Processing of /var/flash/fx_conf attributes responsible
		   for automatic start of telnetd.

config FREETZ_REPLACE_AR7LOGIN
	bool "Replace ar7login"
	depends on (FREETZ_AVM_HAS_TELNETD && !FREETZ_REMOVE_TELNETD) || FREETZ_ADD_TELNETD
	default y
	help
		If wrapper was started by telnetd AND root password
		is defined, proceed with regular user/password login.
		Otherwise fall back to web password (and user, if set) login.

config FREETZ_PATCH_START_WLAN_IF_ON_BOOT
	bool "Start wlan interface on boot"
	depends on FREETZ_AVM_HAS_WLAN && !FREETZ_REMOVE_WLAN
	depends on FREETZ_SYSTEM_TYPE_VR9
	depends on FREETZ_AVM_VERSION_06_8X_MIN && FREETZ_AVM_VERSION_07_1X_MAX
	default y if FREETZ_AVM_VERSION_06_9X_MIN
	default n
	help
		Runs "ifconfig wlan up" on system start to
		enable ip assignment etc, which fails on
		some devices with installed Freetz.
		This is a workaround!
		The cause of this problem is still unknown.

comment "AVM daemons ----------------------------------------------"

config FREETZ_AVMDAEMON_DISABLE_IGD
	bool "Disable igd/upnp"
	default n
	help
		Disables dsld's IGD & multid's UPNP-device

config FREETZ_AVMDAEMON_DISABLE_NTP
	bool "Disable ntp client"
	default n
	help
		Disables multid's basic NTP client

config FREETZ_AVMDAEMON_DISABLE_IGM
	bool "Disable IGMP"
	default n
	help
		Disables multid's IGMP proxy

config FREETZ_AVMDAEMON_DISABLE_TR069
	bool "Disable tr069"
	depends on FREETZ_AVM_HAS_TR069
	default n
	help
		Disables multid's tr069discover

config FREETZ_AVMDAEMON_DISABLE_MULTIDPORTS
	bool "Disable services by preload"
	depends on FREETZ_AVM_HAS_AVMDAEMON_PRELOAD
	select FREETZ_LIB_libmultid
	default n
	help
		This disables some ports bindings of multid
		by remapping them to higher ones.

config FREETZ_AVMDAEMON_DISABLE_DNS
	bool "Disable DNS"
	depends on FREETZ_AVMDAEMON_DISABLE_MULTIDPORTS
	select FREETZ_LIB_libmultid_WITH_DNS
	default n
	help
		Remaps multid's binding of the DNS ports, so another
		dns-server could be used, avm's dynamic-dns updater
		and timesync works correct.

config FREETZ_AVMDAEMON_DISABLE_DHCP
	bool "Disable DHCP"
	depends on FREETZ_AVMDAEMON_DISABLE_MULTIDPORTS
	select FREETZ_LIB_libmultid_WITH_DHCP
	default n
	help
		Remaps multid's binding of the DHCP port. Don't
		forget to set up a server for the guest-wlan too.

config FREETZ_AVMDAEMON_DISABLE_LLMNR
	bool "Disable LLMNR"
	depends on FREETZ_AVMDAEMON_DISABLE_MULTIDPORTS
	select FREETZ_LIB_libmultid_WITH_LLMNR
	default n
	help
		Remaps multid's binding of both LLMNR ("Link-
		local Multicast Name Resolution) ports.

endmenu # "Other patches" #

